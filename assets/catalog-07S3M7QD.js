var P=a=>{throw TypeError(a)};var k=(a,t,e)=>t.has(a)||P("Cannot "+e);var s=(a,t,e)=>(k(a,t,"read from private field"),e?e.call(a):t.get(a)),n=(a,t,e)=>t.has(a)?P("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(a):t.set(a,e),m=(a,t,e,i)=>(k(a,t,"write to private field"),i?i.call(a,e):t.set(a,e),e),u=(a,t,e)=>(k(a,t,"access private method"),e);import{H as T,a as H,S as U,M as x,b as F}from"./SwitchPageController-D7356FX6.js";import{C as M}from"./CityController-DSj6KMa1.js";var _,h,f,o,r,d,l,c,g;class q{constructor(){n(this,c);n(this,_);n(this,h,{selector:"[data-catalog-select]",parent:"[data-catalog-list]",title:"[data-catalog-name]"});n(this,f,{stocks:"Акции",popular:"Популярное",components:"Компоненты ПК",other:"Другая техника",accessories:"Аксессуары"});n(this,o,new URL(window.location.href));n(this,r);n(this,d);n(this,l);this.helpers=new T,this.htmlBuilder=new H,this.selectorElement=document.querySelector(s(this,h).selector),this.parentElement=document.querySelector(s(this,h).parent),this.titleElement=document.querySelector(s(this,h).title),this.init()}async init(){m(this,_,await this.helpers.getData()),this.handleUrlParams(),this.getCatalogProduct(),this.getSelectedOption(),this.addEventListener(),this.helpers.addEventListenerToBuyButton("main-products__item","main-products__buy"),this.helpers.buttonStopPropagation("main-products__buy"),this.helpers.addEventListenerToFavoritesButton("main-products__item","main-products__favorit"),this.helpers.buttonStopPropagation("main-products__favorit"),this.helpers.getCountBasket()}getSelectedOption(){m(this,l,this.selectorElement.value)}addEventListener(){this.selectorElement.addEventListener("change",()=>{this.getSelectedOption(),this.parentElement.innerHTML="",this.getCatalogProduct(),console.log(s(this,l))})}getCatalogProduct(){this.parentElement.innerHTML="";let t=s(this,_);t=t.sort((e,i)=>i.feedback-e.feedback),s(this,l)==="popular"&&(t=t.sort((e,i)=>i.feedback-e.feedback)),s(this,l)==="low-price"?t=t.sort((e,i)=>e.price-i.price):s(this,l)==="more-price"&&(t=t.sort((e,i)=>i.price-e.price)),t.forEach(e=>{if(s(this,r)==="search"&&e.tags.forEach(i=>{if(i===s(this,d)){const p=u(this,c,g).call(this,e);this.parentElement.appendChild(p)}}),e.category===s(this,r)&&s(this,r)!=="stocks"&&s(this,r)!=="popular"){const i=u(this,c,g).call(this,e);this.parentElement.appendChild(i)}if(e.discount&&s(this,r)==="stocks"){const i=u(this,c,g).call(this,e);this.parentElement.appendChild(i)}if(e.feedback>=4.9&&s(this,r)==="popular"){const i=u(this,c,g).call(this,e);this.parentElement.appendChild(i)}}),this.titleElement.textContent=s(this,f)[s(this,r)]||this.getSearchTitle()}getSearchTitle(){const t=String(s(this,d)),e=t.slice(0,1).toUpperCase(),i=t.slice(1,t.length).toLowerCase();return e+i}handleUrlParams(){const t=s(this,o).searchParams.get("type"),e=s(this,o).searchParams.get("search");t&&m(this,r,t),e&&m(this,d,e)}getTypeParamUrl(){return s(this,o).searchParams.get("type")}getSerchParam(){return s(this,o).searchParams.get("search")||null}}_=new WeakMap,h=new WeakMap,f=new WeakMap,o=new WeakMap,r=new WeakMap,d=new WeakMap,l=new WeakMap,c=new WeakSet,g=function(t){const e=t.id,i=this.htmlBuilder.createListItem("main-products__item","data-catalog-id",e),p=this.htmlBuilder.createLinkBlock(`/TechnoPort/pages/product.html?id=${e}`,"main-products__link"),B=this.htmlBuilder.createBlock("main-products__info"),b=this.htmlBuilder.createImage(t.mainImage,"main-products__image"),E=this.htmlBuilder.createBlock("main-products__texts"),y=this.htmlBuilder.createNameProduct(t.name,"main-products__title"),w=this.htmlBuilder.createFeedback(t.feedback,"main-products__feedback"),C=this.htmlBuilder.createBlock("main-products__price"),S=this.htmlBuilder.createPrice(t.price,"main-products__cost"),L=this.htmlBuilder.createBuyButton("main-products__buy"),v=this.htmlBuilder.createButtonFavorit("main-products__favorit");return E.appendChild(y),E.appendChild(w),B.appendChild(b),B.appendChild(E),C.appendChild(S),C.appendChild(L),C.appendChild(v),p.appendChild(B),p.appendChild(C),i.appendChild(p),i};new q;new U;new x;new M;new F;
