var C=n=>{throw TypeError(n)};var T=(n,t,e)=>t.has(n)||C("Cannot "+e);var i=(n,t,e)=>(T(n,t,"read from private field"),e?e.call(n):t.get(n)),s=(n,t,e)=>t.has(n)?C("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),l=(n,t,e,o)=>(T(n,t,"write to private field"),o?o.call(n,e):t.set(n,e),e),u=(n,t,e)=>(T(n,t,"access private method"),e);import{H as F,a as I,S as A,M as V,b as W}from"./SwitchPageController-D7356FX6.js";import{C as H}from"./CityController-DSj6KMa1.js";var v,_,g,p,a,B,c,q,M;class D{constructor(){s(this,c);s(this,v,JSON.parse(localStorage.getItem("visited"))||[]);s(this,_);s(this,g,"[data-viewed-list]");s(this,p,{popularList:"[data-viewed-list]",previewButton:"[data-viewed-preview]",nextButton:"[data-viewed-next]",notFound:"[data-viewed-notFound]"});s(this,a,0);s(this,B,60);this.helpers=new F,this.htmlBuilder=new I,this.parentElement=document.querySelector(i(this,g)),this.sliderPopularElement=document.querySelector(i(this,p).popularList),this.previewButtonElement=document.querySelector(i(this,p).previewButton),this.nextButtonElement=document.querySelector(i(this,p).nextButton),this.notFoundElement=document.querySelector(i(this,p).notFound),this.init()}async init(){l(this,_,await this.helpers.getData()),this.getProductViewed(),this.helpers.addEventListenerToBuyButton("main-viewed__item","viewed-product__buy"),this.helpers.buttonStopPropagation("viewed-product__buy"),this.helpers.addEventListenerToFavoritesButton("main-viewed__item","viewed-product__favorit"),this.helpers.buttonStopPropagation("viewed-product__favorit"),this.addEventistenerToSliderButtons(),this.hideNotFound()}hideNotFound(){i(this,v).length?this.notFoundElement.style.display="none":(this.previewButtonElement.style.display="none",this.nextButtonElement.style.display="none")}getProductViewed(){i(this,v).forEach(t=>{const e=i(this,_).find(o=>o.id===t);if(e){const o=u(this,c,M).call(this,e);this.parentElement.appendChild(o)}})}addEventistenerToSliderButtons(){const t=this.sliderPopularElement,e=t.querySelectorAll("li").length;this.previewButtonElement.addEventListener("click",()=>{l(this,a,Math.max(0,i(this,a)-1)),u(this,c,q).call(this,t)}),this.nextButtonElement.addEventListener("click",()=>{l(this,a,Math.min(e-1,i(this,a)+1)),u(this,c,q).call(this,t)}),t.addEventListener("scroll",()=>{const o=t.scrollLeft;l(this,a,Math.round(o/(218+i(this,B))))})}}v=new WeakMap,_=new WeakMap,g=new WeakMap,p=new WeakMap,a=new WeakMap,B=new WeakMap,c=new WeakSet,q=function(t){const e=t.querySelectorAll("li");if(t.length===0)return;const o=e[0].clientWidth,r=i(this,B)||0;t.scrollTo({left:i(this,a)*(o+r),behavior:"smooth"})},M=function(t){const e=t.id,o=this.htmlBuilder.createListItem("main-viewed__item","data-viewed-item-id",e),r=this.htmlBuilder.createNameLinkProduct(`/TechnoPort/pages/product.html?id=${e}`,"","main-viewed__link"),y=this.htmlBuilder.createBlock("viewed-product"),b=this.htmlBuilder.createImage(t.mainImage,"viewed-product__image"),f=this.htmlBuilder.createNameProduct(t.name,"viewed-product__name"),P=this.htmlBuilder.createFeedback(t.feedback,"viewed-product__feedback"),L=this.htmlBuilder.createPrice(t.price,"viewed-product__price"),k=this.htmlBuilder.createButtonBlock("viewed-product__buttons","viewed-product__buy","viewed-product__favorit","data-viewed-buy-button",e);return r.append(y),r.append(b),r.append(f),r.append(P),r.append(L),r.append(k),o.appendChild(r),o};var S,m,d,w,E,h,x,N;class ${constructor(){s(this,h);s(this,S,"[data-popular-list]");s(this,m,{popularList:"[data-popular-list]",previewButton:"[data-populat-preview]",nextButton:"[data-popular-next]"});s(this,d,0);s(this,w,60);s(this,E);this.helpers=new F,this.htmlBuilder=new I,this.parantElement=document.querySelector(i(this,S)),this.sliderPopularElement=document.querySelector(i(this,m).popularList),this.previewButtonElement=document.querySelector(i(this,m).previewButton),this.nextButtonElement=document.querySelector(i(this,m).nextButton),this.init()}async init(){l(this,E,await this.helpers.getData()),this.getProductPopular(),this.helpers.addEventListenerToBuyButton("main-popular__item","popular-product__buy"),this.helpers.buttonStopPropagation("popular-product__buy"),this.helpers.addEventListenerToFavoritesButton("main-popular__item","popular-product__favorit"),this.helpers.buttonStopPropagation("popular-product__favorit"),this.addEventistenerToSliderButtons()}getProductPopular(){i(this,E).forEach(t=>{if(t.feedback>=4.9){const e=u(this,h,N).call(this,t);this.parantElement.appendChild(e)}})}addEventistenerToSliderButtons(){const t=this.sliderPopularElement,e=t.querySelectorAll("li").length;this.previewButtonElement.addEventListener("click",()=>{l(this,d,Math.max(0,i(this,d)-1)),u(this,h,x).call(this,t)}),this.nextButtonElement.addEventListener("click",()=>{l(this,d,Math.min(e-1,i(this,d)+1)),u(this,h,x).call(this,t)}),t.addEventListener("scroll",()=>{const o=t.scrollLeft;l(this,d,Math.round(o/(218+i(this,w))))})}}S=new WeakMap,m=new WeakMap,d=new WeakMap,w=new WeakMap,E=new WeakMap,h=new WeakSet,x=function(t){const e=t.querySelectorAll("li");if(t.length===0)return;const o=e[0].clientWidth,r=i(this,w)||0;t.scrollTo({left:i(this,d)*(o+r),behavior:"smooth"})},N=function(t){const e=t.id,o=this.htmlBuilder.createListItem("main-popular__item","data-popular-item-id",e),r=this.htmlBuilder.createNameLinkProduct(`/TechnoPort/pages/product.html?id=${e}`,"","main-popular__link"),y=this.htmlBuilder.createBlock("popular-product"),b=this.htmlBuilder.createImage(t.mainImage,"popular-product__image"),f=this.htmlBuilder.createNameProduct(t.name,"popular-product__name"),P=this.htmlBuilder.createFeedback(t.feedback,"popular-product__feedback"),L=this.htmlBuilder.createPrice(t.price,"popular-product__price"),k=this.htmlBuilder.createButtonBlock("popular-product__buttons","popular-product__buy","popular-product__favorit","data-popular-buy-button",e);return r.append(y),r.append(b),r.append(f),r.append(P),r.append(L),r.append(k),o.appendChild(r),o};new $;new D;new A;new V;new H;new W;
