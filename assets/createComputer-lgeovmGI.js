var p=a=>{throw TypeError(a)};var g=(a,e,t)=>e.has(a)||p("Cannot "+t);var l=(a,e,t)=>(g(a,e,"read from private field"),t?t.call(a):e.get(a)),u=(a,e,t)=>e.has(a)?p("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(a):e.set(a,t),b=(a,e,t,r)=>(g(a,e,"write to private field"),r?r.call(a,t):e.set(a,t),t);import{a as y,H as f,S as w,M as S,b as k}from"./SwitchPageController-D7356FX6.js";import{C}from"./CityController-DSj6KMa1.js";class O{constructor(e){this.componentsListElement=document.querySelectorAll(e.componentsList),this.infoBlockElement=document.querySelectorAll(e.infoBlock),this.htmlBuilder=new y}addToBuy(e){const t=document.querySelector("[data-create-buy-button]"),r=document.querySelectorAll(".createComputer__input"),c=document.querySelector("[data-create-error]");let n=0;r.forEach(s=>{s.addEventListener("change",()=>{if(s.value){n++;const i=s.value,m=e.find(d=>d.name===i);this.addImage(m.mainImage,s)}else n--,this.addImage("",s)})}),t.addEventListener("click",()=>{localStorage.setItem("buy",JSON.stringify([])),r.forEach(s=>{if(n!==8)return c.textContent="Не все компоненты выбраны!";{const i=JSON.parse(localStorage.getItem("buy")),m=e.find(d=>d.name==s.value);return i.push(m.id),localStorage.setItem("buy",JSON.stringify(i)),location.href="/TechnoPort/pages/basket.html",c.innerHTML=""}})})}addImage(e,t){const n=t.parentElement.parentElement.querySelector("img");return n.src=e}}var h,o;class B{constructor(){u(this,h,{componentsList:"[data-create-components-list]",infoBlock:"[data-create-blockInfo]",imageProduct:"[data-create-image]"});u(this,o);this.htmlBuilder=new y,this.helpers=new f,this.view=new O(l(this,h)),this.init()}async init(){b(this,o,await this.helpers.getData()),this.addOptionToList(),this.view.addToBuy(l(this,o)),this.helpers.getCountBasket()}addOptionToList(){this.view.componentsListElement.forEach(e=>{l(this,o).forEach(t=>{switch(e.id){case"processor":{this.setOption(t,e,"процессор");break}case"motherboard":{this.setOption(t,e,"материнская плата");break}case"power":{this.setOption(t,e,"питание");break}case"corpus":{this.setOption(t,e,"корпус");break}case"card":{this.setOption(t,e,"видеокарта");break}case"cooling":{this.setOption(t,e,"кулер");break}case"ram":{this.setOption(t,e,"оперативная память");break}case"storage":{this.setOption(t,e,"накопитель");break}}})})}setOption(e,t,r){if(e.tags[0]===r){const s=String(e.name).slice(length),i=this.htmlBuilder.createOption(s);t.appendChild(i)}}}h=new WeakMap,o=new WeakMap;new B;new w;new S;new C;new k;
